<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <title>All Students</title>
   <link rel="stylesheet" href="/style.css" />
</head>
<body>
   <div id="records-header">
      <h1>Submitted Student Records</h1>
   </div>   
   <table>
      <thead>
         <tr>
            <th>Name</th>
            <th>Contact</th>
            <th>Gender</th>
            <th>Course</th>
            <th>Address</th>
            <th>State</th>
            <th>District</th>
            <th>Submitted At</th>
            <th>Actions</th>
         </tr>
      </thead>
      <tbody>
         <% students.forEach(student => { %>
         <tr>
            <td><%= student.name %></td>
            <td><%= student.contact %></td>
            <td><%= student.gender %></td>
            <td><%= student.course %></td>
            <td><%= student.address %></td>
            <td><%= student.state.replace(/_/g, " ") %></td>
            <td><%= student.district.replace(/_/g, " ") %></td>
            <td>
               <%= student.createdAt
                  ? new Date(student.createdAt).toLocaleString("en-IN", {
                        day: "2-digit", month: "2-digit", year: "numeric",
                        hour: "2-digit", minute: "2-digit", second: "2-digit",
                        hour12: true
                     })
                  : "N/A"
               %>
            </td>
            <td>
               <form action="/delete/<%= student._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this record?');">
                  <button type="submit" style="background-color:#d32f2f;color:white;border:none;padding:5px 10px; border-radius:5px; cursor:pointer;">Delete</button>
               </form>
            </td>
         </tr>
         <% }); %>
      </tbody>
   </table>
</body>
</html>
